<div th:fragment="watch_video" class="container mt-5">
    <h2 class="mb-3" th:text="${video.title}"></h2>
    <div class="text-center">
        <iframe width="800" height="450"
                th:src="'https://www.youtube.com/embed/' + ${video.youtubeId}"
                frameborder="1"
                allow="autoplay; encrypted-media"
                allowfullscreen>
        </iframe>
    </div>
    <!-- ÄÃºng: -->
    <button class="btn btn-success" th:onclick="'markAsCompleted(' + ${video.videoId} + ')'">ÄÃ£ hoÃ n thÃ nh</button>
    <script>
    function markAsCompleted(videoId) {
        fetch('/mvc/videos/completed/' + videoId, { method: 'POST' })
    .then(res => {
        if (res.status === 401) {
            alert("Báº¡n cáº§n Ä‘Äƒng nháº­p Ä‘á»ƒ hoÃ n thÃ nh video!");
            window.location.href = "/mvc/auth/login";
        } else if (res.ok) {
            alert("ğŸ‰ Há»‡ thá»‘ng Ä‘Ã£ ghi nháº­n báº¡n Ä‘Ã£ há»c xong video!");
        } else {
            alert("âŒ Ghi nháº­n tháº¥t báº¡i!");
        }
    });
    }
    </script>
</div>
